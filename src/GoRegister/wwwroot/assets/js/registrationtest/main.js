(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{135:function(e,t,a){e.exports={PageButtons:"PageButtons_PageButtons__1uNGJ"}},138:function(e,t,a){e.exports={FieldEditor:"FieldEditor_FieldEditor__1xzNO"}},139:function(e,t,a){e.exports={Backdrop:"Backdrop_Backdrop__6f_m4"}},140:function(e,t,a){e.exports={ModalHeader:"ModalHeader_ModalHeader__3OlUg"}},141:function(e,t,a){e.exports={ModalFooter:"ModalFooter_ModalFooter__RykrV"}},142:function(e,t,a){e.exports={ModalBody:"ModalBody_ModalBody__2AbfE"}},143:function(e,t,a){e.exports={Modal:"Modal_Modal___0k8N"}},145:function(e,t,a){e.exports=a(324)},150:function(e,t,a){},300:function(e,t,a){},322:function(e,t,a){},323:function(e,t,a){},324:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),i=a(18),r=a.n(i),c=(a(150),a(6)),o=a(21),d=a(28),s=a(31),u=a(14),m=a(32),f=a(22),p=a(127),g=a(10),E=a(36),v=a.n(E),h=a(9),b=a(1),y=a(144),F=(a(169),function(){function e(t,a){Object(o.a)(this,e),this.getState=t,this.setState=a}return Object(d.a)(e,[{key:"getById",value:function(e,t){return e.find(function(e){return e.id===t})}},{key:"generateUUID",value:function(){var e=(new Date).getTime();return"undefined"!==typeof performance&&"function"===typeof performance.now&&(e+=performance.now()),"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var a=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"===t?a:3&a|8).toString(16)})}},{key:"state",get:function(){return this.getState()}}]),e}()),x=a(11),N=a.n(x),O=function(e){function t(e,a){var n;return Object(o.a)(this,t),(n=Object(s.a)(this,Object(u.a)(t).call(this,e,a))).onDragEnd=function(e){var t=function(e,t,a){var n=Array.from(e),l=n.splice(t,1),i=Object(b.a)(l,1)[0];return n.splice(a,0,i),n},a=N()(n.state.pages),l=n.state.activePage,i=a.find(function(e){return e.id===l});if(e.source.droppableId.includes("fieldList")&&e.destination.droppableId.includes("page-")){var r=e.draggableId.split("-")[1],c=e.destination.droppableId.split("-")[1];n.moveFieldToPage(r,c)}if("fieldList"===e.destination.droppableId){var o=t(i.fields,e.source.index,e.destination.index);i.fields=o,n.setState({pages:a})}"pageList"===e.destination.droppableId&&(a=t(a,e.source.index,e.destination.index),n.setState({pages:a}));if("optionList"===e.destination.droppableId){var d=N()(n.state.fields),s=d.find(function(e){return e.id===n.state.editField}),u=d.indexOf(s),m=t(s.options,e.source.index,e.destination.index);s.options=m,d[u]=s,n.setState({fields:d})}},n.movefieldToPage=function(e){var t=n.state.fields.find(function(t){return t.id===e});n.setState({moveFieldToPage:t})},n.get=function(e){return n.getById(n.state.pages,e)},n.setPage=function(e){n.setState({activePage:e})},n.addPage=function(e){n.setState(function(a){var l=Object(y.a)(Object(u.a)(t.prototype),"generateUUID",Object(f.a)(n)).call(Object(f.a)(n)),i={name:e,id:l,isDeleted:!1,fields:[]},r=i.id,c=N()(a.pages);return c.push(i),{pages:c,activePage:r}})},n.editPageHandler=function(e,t){var a=N()(n.state.pages),l=a.find(function(e){return e.id===t}),i=a.indexOf(l),r=e.target,c="checkbox"===r.type?r.checked:r.value;l[r.name]=c;var o=n.validatePage(l);l.isInvalid=o.isInvalid,l.errorMessage=o.errorMessage,a[i]=l,n.setState({pages:a})},n.validatePage=function(e){return""===e.name?{isInvalid:!0,errorMessage:"Name needed"}:{isInvalid:!1,errorMessage:null}},n.removePage=function(e){n.setState(function(t){var a=Object(h.a)(t.pages).filter(function(t){return t.id!==e});return{pages:a,activePage:void 0!==a[0]?a[0].id:null}})},n}return Object(m.a)(t,e),t}(F),I=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,l=new Array(n),i=0;i<n;i++)l[i]=arguments[i];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(l)))).onDragEnd=function(e){var t=function(e,t,a){var n=Array.from(e),l=n.splice(t,1),i=Object(b.a)(l,1)[0];return n.splice(a,0,i),n},n=N()(a.state.pages),l=a.state.activePage,i=n.find(function(e){return e.id===l});if(e.source.droppableId.includes("fieldList")&&e.destination.droppableId.includes("page-")){var r=e.draggableId.split("-")[1],c=e.destination.droppableId.split("-")[1];a.moveFieldToPage(r,c)}if("fieldList"===e.destination.droppableId){var o=t(i.fields,e.source.index,e.destination.index);i.fields=o,a.setState({pages:n})}"pageList"===e.destination.droppableId&&(n=t(n,e.source.index,e.destination.index),a.setState({pages:n}));if("optionList"===e.destination.droppableId){var d=N()(a.state.fields),s=d.find(function(e){return e.id===a.state.editField}),u=d.indexOf(s),m=t(s.options,e.source.index,e.destination.index);s.options=m,d[u]=s,a.setState({fields:d})}},a.get=function(e){return a.getById(a.state.fields,e)},a.addNewField=function(e){var t=a.getBlankField(e),n=a.state.pages,l=a.state.fields;if(a.state.editField){var i=n.find(function(e){return e.id==a.state.activePage}),r=n.indexOf(i),c=i.fields.indexOf(a.state.editField);i.fields.splice(c+1,0,t.id),n[r]=i,l.push(t),a.setState({pages:n,fields:l,editField:t.id})}else a.setState(function(e){return a.getById(n,e.activePage).fields.push(t.id),l.push(t),{pages:n,fields:l,editField:t.id}})},a.getBlankField=function(e){var t=N()(a.state.blankFields[e]);return t.id=a.generateUUID(),t},a.addField=function(e){a.addFields([e])},a.addFields=function(e){a.setState(function(t){var n,l=t.fields;e.forEach(function(e){l.push(e)});var i=t.pages;return(n=a.getById(i,t.activePage).fields).push.apply(n,Object(h.a)(e.map(function(e){return e.id}))),{fields:l,pages:i}})},a.openEditField=function(e){a.state.editField===e?a.setState({editField:null}):a.setState({editField:e})},a.isActiveField=function(e){return a.state.editField===e},a.preRemoveField=function(e){var t=a.state.fields.find(function(t){return t.id===e});a.setState({removeField:t})},a.removeField=function(e){var t=a.state.fields.map(function(e){return e}),n=t.find(function(t){return t.id===e}),l=t.indexOf(n);n.isDeleted=!0,t[l]=n,a.state.editField===e&&a.setState({editField:null}),a.setState({fields:t,removeField:null})},a.editFieldHandler=function(e,t){var n=N()(a.state.fields),l=n.find(function(e){return e.id===t}),i=n.indexOf(l),r=e.target,c="checkbox"===r.type?r.checked:r.value,o=r.name;"includeDefaultOption"===o&&(l.defaultValue="--Please Select--"),"name"===o&&!0!==l.nameAttrWillNotUpdateDataTag&&(l.dataTag=c.replace(/ /g,"")),l[o]=c;var d=a.validateField(l);l.isInvalid=d.isInvalid,l.errorMessage=d.errorMessage,n[i]=l,a.setState({fields:n})},a.validateField=function(e){return""===e.name?{isInvalid:!0,errorMessage:"Name needed"}:{isInvalid:!1,errorMessage:null}},a.editCheckboxFieldHandler=function(e,t,n){var l,i=a.state.fields,r=(a.state.registrationTypes,i.find(function(e){return e.id===t})),o=parseInt(n),d=r.registrationTypes.find(function(e){return e.registrationTypeId===o});if("internalOnly"===e.target.name){var s=(l=d,Object(c.a)({},d,{isInternalOnly:!l.isInternalOnly})),u=r.registrationTypes.indexOf(d);r.registrationTypes[u]=s}else if(d){var m=r.registrationTypes.filter(function(e){return e.registrationTypeId!==d.registrationTypeId});r.registrationTypes=m}else{var f={copyFromParentFieldAction:0,isHidden:!1,isInternalOnly:!1,registrationTypeId:o};r.registrationTypes.push(f)}a.setState({fields:i})},a.moveFieldToPage=function(e,t){if(t!==a.state.activePage){var n=a.state.pages,l=a.getById(n,t),i=a.getById(n,a.state.activePage);i.fields.splice(i.fields.indexOf(e),1),l.fields.push(e),a.setState({pages:n,moveFieldToPage:null})}},a.selectField=function(e){if(-1===a.state.selectedFields.indexOf(e)){var t=a.state.selectedFields.splice(0);t.push(e),a.setState({selectedFields:t})}},a.isFieldSelected=function(e){return a.state.selectedFields.indexOf(e)},a.getFieldsWithOptions=function(){return a.state.fields.filter(function(e){return!e.isDeleted&&16===e.fieldTypeId})},a.setFieldRules=function(e,t,n){var l=a.state.fields;l.find(function(t){return t.id===e}).rules=t.map(function(e){var t=Object(c.a)({},e);return t.isDeleted=!t.checked,t}),a.setState({fields:l})},a.getRuleOptionsForField=function(e){var t=a.getById(a.state.fields,e);if(!t.rules)return[];for(var n=[],l=0;l<t.rules.length;l++){var i=t.rules[l],r=a.get(i.fieldId);if(!r.isDeleted){var c=a.getById(r.options,i.optionId);c.isDeleted||n.push({fieldId:r.fieldId,fieldName:r.name,optionValue:c.value,optionId:c.id})}}return n},a.editOption=function(e){var t=a.state.fields.filter(function(e){return e.options}).find(function(t){return t.options.find(function(t){return t.id===e})}),n=t.options.find(function(t){return t.id===e});a.setState({editOption:Object(c.a)({},n,{fieldId:t.id})})},a.updateOption=function(e,t){var n=N()(a.state.fields),l=n.find(function(e){return e.id===t.fieldId}),i=n.indexOf(l),r=l.options.find(function(e){return e.id===t.id}),o=l.options.indexOf(r),d=Object(c.a)({},r,e);n[i].options[o]=d,a.setState({fields:n,editOption:null})},a}return Object(m.a)(t,e),Object(d.a)(t,[{key:"getActiveField",value:function(){return this.get(this.state.editField)}}]),t}(F),T=a(37),k=a.n(T),S=a(327);function P(e){var t=Object(n.useState)(!1),a=Object(b.a)(t,2),i=a[0],r=a[1],c=Object(n.useState)(""),o=Object(b.a)(c,2),d=o[0],s=o[1];function u(){r(!1)}return l.a.createElement(l.a.Fragment,null,l.a.createElement("span",{onClick:function(){r(!0),s("")},className:""},"Add Page"),l.a.createElement(S.a,{show:i,onHide:u},l.a.createElement(S.a.Header,{closeButton:!0},l.a.createElement(S.a.Title,null,"Add new page")),l.a.createElement(S.a.Body,null,l.a.createElement("form",{onSubmit:function(t){t.preventDefault(),""!==d.trim()&&(e.addPage(d),u())},className:"form"},l.a.createElement("div",{className:"form-group"},l.a.createElement("label",null,"Name"),l.a.createElement("input",{type:"text",value:d,onChange:function(e){s(e.target.value)},className:"form-control",autoFocus:!0})),l.a.createElement("div",{className:"form-group"},l.a.createElement("button",{disabled:!d.trim(),className:"btn btn-primary"},"Add Page"))))))}function C(e){var t,a=e.pages,n=e.activePage,i=e.pageCallbackHandler;if(a){var r=Object.keys(a);t=r.map(function(e,t){var r=a[e];return l.a.createElement(g.b,{key:r.id,draggableId:"page"+r.id,index:t},function(e){return l.a.createElement("li",Object.assign({ref:e.innerRef},e.draggableProps,e.dragHandleProps,{className:n.toString()===r.id?k.a.Active:null,key:r.id,onClick:function(){return i("PAGE_SETPAGE",r.id)}}),l.a.createElement(g.c,{droppableId:"page-"+r.id,isCombineEnabled:!0},function(e){return l.a.createElement("div",Object.assign({ref:e.innerRef},e.draggableProps,e.dragHandleProps,{className:k.a.Pages,style:{minHeight:"20px"}}),r.name)}))})})}return l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-10"}," ",l.a.createElement(g.c,{droppableId:"pageList",direction:"horizontal",type:"field"},function(e){return l.a.createElement("ul",Object.assign({ref:e.innerRef},e.draggableProps,e.dragHandleProps,{className:k.a.Pages}),t)})," "),l.a.createElement("div",{className:"col-md-2"},l.a.createElement("div",{style:{padding:"10px 15px",minWidth:"125px",textAlign:"center",border:"1px solid #757575",marginRight:"4px",marginBottom:"4px",cursor:"pointer"},className:k.a.Active},l.a.createElement(P,{addPage:function(e){return i("PAGE_ADDPAGE",e)}}))))}var j=a(59),D=a.n(j),_=(a(300),a(328)),w=a(80),A=a.n(w);function H(e){var t;switch(e.hoverColor){case"red":t="element-delete";break;case"green":t="element-rules"}return l.a.createElement("div",{className:"".concat(t," ").concat(A.a.Tooltip),"aria-label":"Delete",onClick:e.clicked},l.a.createElement("span",{className:e.iconClassName,"aria-hidden":"true"}),e.tooltipText?l.a.createElement("span",{className:A.a.TooltipText},e.tooltipText):null)}function R(e){var t=Object(n.useState)(!1),a=Object(b.a)(t,2),i=a[0],r=a[1],o=Object(n.useState)(null),d=Object(b.a)(o,2),s=d[0],u=d[1],m=Object(n.useState)([]),f=Object(b.a)(m,2),p=f[0],g=f[1],E=e.ruleFields(),v=e.currentRules;function h(e){r(!1),u(null),e&&e.stopPropagation()}function y(e){e.stopPropagation()}function F(e){u(e);var t=E.find(function(t){return t.id===e}),a=v.length>0&&v.map(function(e){return e.optionId});g(t.options.map(function(t){return{fieldId:e,value:t.value,optionId:t.id,checked:a.length>0&&a.includes(t.id)}}))}function x(e){g(p.map(function(t){var a=Object(c.a)({},t);return a.optionId===e.target.id&&(a.checked=e.target.checked),a}))}return Object(n.useEffect)(function(){v.length>0&&F(v[0].fieldId)},[v]),l.a.createElement(l.a.Fragment,null,e.doDisplayButton&&l.a.createElement("span",null,"\xa0 | \xa0",l.a.createElement(H,{iconClassName:"glyphicon glyphicon-random",hoverColor:"green",clicked:function(e){return function(e){r(!0),e.stopPropagation()}(e)},tooltipText:"Edit display rules"})),l.a.createElement(S.a,{show:i,onHide:function(e){return h(e)}},l.a.createElement(S.a.Header,{onClick:y,closeButton:!0},l.a.createElement(S.a.Title,null,"Edit display rules for ",l.a.createElement("b",null,e.elementName))),l.a.createElement(S.a.Body,{onClick:y},l.a.createElement("select",{onChange:function(e){F(e.target.selectedOptions[0].value)},onClick:y,value:e.currentRules[0]&&e.currentRules[0].fieldId},l.a.createElement("option",null,"Select a field"),E.filter(function(t){return t.id!=e.fieldId}).map(function(e){return l.a.createElement("option",{value:e.id,key:e.id},e.name)})),p.length>0&&p.map(function(e){if(!e.isDeleted)return l.a.createElement("div",{key:e.optionId,className:"checkbox"},l.a.createElement("label",null,l.a.createElement("input",{type:"checkbox",checked:e.checked,value:e.optionId,key:e.optionId,id:e.optionId,onChange:x}),e.value))}),l.a.createElement("hr",null),l.a.createElement(_.a,{bsStyle:"primary",onClick:function(t){return function(t,a,n){e.setFieldRules(t,a.filter(function(e){return e.checked}),s),h(n)}(e.fieldId,p,t)}},"Save changes"))))}function B(e){var t=Object(n.useState)(!1),a=Object(b.a)(t,2),i=a[0],r=a[1];var c=D.a.ActiveField,o=e.isActive?c:"";o+=" "+D.a.Field;var d=e.field.isMandatory,s=e.field.fieldType,u=e.field.name||"~ New "+s+" Field ~",m=e.getFieldsWithOptions,f=e.field.isInvalid?" has-error":null,p=e.getRuleOptionsForField(e.field.id),g="";p.length>0&&(g=p[0].fieldName);var E=e.getRuleOptionsForField(e.field.id),v=E.length>0?E[0].optionValue:null;E.shift();var h=E.length>1?E.map(function(e){return e.optionValue}).join(", "):null,y=l.a.createElement("span",{onClick:function(){return r(!i)}},i?", ".concat(h):E.length>1?" + ".concat(E.length," others"):null),F=e.field.isInvalid?l.a.createElement("div",{className:"text-danger"},"* ",e.field.errorMessage):null;return l.a.createElement("div",{className:D.a.Field+" "+o+f,key:e.field.id,onClick:e.openEditField,style:e.field.isVisible?null:{display:"none"}},l.a.createElement("div",{className:"field-header"},l.a.createElement("div",{className:"field-text"},u," ",d?l.a.createElement("span",{className:"is-mandatory"},"*"):""),l.a.createElement("div",null,l.a.createElement(H,{iconClassName:"fa fa-share-square",hoverColor:"green",clicked:function(t){return function(t){t.stopPropagation(),e.moveFieldToPage()}(t)},tooltipText:"Move to another page"}),l.a.createElement(H,{iconClassName:"fa fa-trash",hoverColor:"red",clicked:function(t){return function(t){t.stopPropagation(),e.removeField()}(t)},tooltipText:"Delete field"}))),l.a.createElement("div",{className:"field-footer"},l.a.createElement("div",{className:"field-footer-left"},g&&l.a.createElement("div",{className:"option-rules"},l.a.createElement("span",{className:"glyphicon glyphicon-random"})," \xa0",g," ",l.a.createElement("span",{className:"glyphicon glyphicon-arrow-right"})," ",v,y)," ",e.field.registrationTypes&&e.field.registrationTypes.length>0?l.a.createElement("div",null,l.a.createElement("span",{className:"glyphicon glyphicon-eye-open","aria-hidden":"true"}),Object.keys(e.regTypes).map(function(t){if(e.field.registrationTypes.find(function(e){return e.registrationTypeId==t}))return l.a.createElement("span",{key:t,className:"field-visibility"},e.regTypes[t].name)})):l.a.createElement("div",null,l.a.createElement("div",null,l.a.createElement("span",{className:"glyphicon glyphicon-eye-close","aria-hidden":"true"}))),F),l.a.createElement("div",{className:"field-footer-right"},l.a.createElement("span",{className:"field-type"},s),l.a.createElement(R,{fieldId:e.field.id,elementName:u,doDisplayButton:m().length>0,ruleFields:e.getFieldsWithOptions,optionFields:e.getRuleOptionsForField,setFieldRules:e.setFieldRules,currentRules:e.field.rules}))))}function M(e){var t=Object(n.useState)(!1),a=Object(b.a)(t,2),i=a[0],r=a[1];function c(e){r(!1),e&&e.stopPropagation()}return l.a.createElement(l.a.Fragment,null,l.a.createElement(H,{iconClassName:"fa fa-trash",hoverColor:"red",clicked:function(e){return function(e){r(!0),e.stopPropagation()}(e)},tooltipText:"Delete page"}),l.a.createElement(S.a,{show:i,onHide:function(e){return c(e)}},l.a.createElement(S.a.Header,{closeButton:!0},l.a.createElement(S.a.Title,null,"Delete ",l.a.createElement("b",null,e.elementName),"?")),l.a.createElement(S.a.Footer,null,l.a.createElement(_.a,{className:"btn btn-primary",onClick:function(e){return c(e)}},"No"),l.a.createElement(_.a,{className:"btn btn-danger",onClick:function(t){return function(t){e.remove(e.elementId),c(t)}(t)}},"Yes, off with its head!"))))}function L(e){var t=Object(n.useState)(!1),a=Object(b.a)(t,2),i=a[0],r=a[1],c=e.page,o=e.registrationPageTypes,d=e.userTypes;function s(e){r(!1),e&&e.stopPropagation()}return l.a.createElement(l.a.Fragment,null,l.a.createElement(H,{iconClassName:"fa fa-pencil",hoverColor:"green",clicked:function(e){return function(e){r(!0),e.stopPropagation()}(e)},tooltipText:"Edit page name"}),l.a.createElement(S.a,{show:i,onHide:function(e){return s(e)}},l.a.createElement(S.a.Header,{closeButton:!0},l.a.createElement(S.a.Title,null,"Edit page")),l.a.createElement(S.a.Body,null,l.a.createElement("div",{className:"form-group"},l.a.createElement("label",null,"Name"),l.a.createElement("input",{type:"text",name:"name",value:c.name,onChange:function(t){e.editPage(t,c.id)},className:"form-control"})),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",null,"Description"),l.a.createElement("input",{type:"text",name:"description",value:c.description,onChange:function(t){return e.editPage(t,c.id)},className:"form-control"})),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",null,"Registration Page Type"),l.a.createElement("br",null),l.a.createElement("select",{value:c.registrationPageTypeId,onChange:function(t){return e.editPage(t,c.id)},type:"text",name:"registrationPageTypeId"},l.a.createElement("option",{disabled:!0,selected:!0,hidden:!0},"Select..."),o.map(function(e){return l.a.createElement("option",{key:e.id,value:e.id},e.description)}))),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",null,"Reader User Type"),l.a.createElement("br",null),l.a.createElement("select",{value:c.readerUserTypeId,onChange:function(t){return e.editPage(t,c.id)},type:"text",name:"readerUserTypeId"},l.a.createElement("option",{disabled:!0,selected:!0,hidden:!0},"Select..."),d.map(function(e){return l.a.createElement("option",{key:e.id,value:e.id},e.description)}))),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",null,"Writer User Type"),l.a.createElement("br",null),l.a.createElement("select",{value:c.writerUserTypeId,onChange:function(t){return e.editPage(t,c.id)},type:"text",name:"writerUserTypeId"},l.a.createElement("option",{disabled:!0,selected:!0,hidden:!0},"Select..."),d.map(function(e){return l.a.createElement("option",{key:e.id,value:e.id},e.description)}))),l.a.createElement("div",{className:"checkbox"},l.a.createElement("label",null,l.a.createElement("input",{type:"checkbox",name:"isInternalOnly",checked:c.isInternalOnly,onChange:function(t){return e.editPage(t,c.id)}}),"Is Page Internal Only"))),l.a.createElement(S.a.Footer,null,l.a.createElement(_.a,{className:"btn btn-primary",onClick:function(e){return s(e)}},"Close"))))}var V=a(135),G=a.n(V);function U(e){function t(t){if(0!==e.pageIndex||-1!==t){var a=1===t?e.pageIndex+1:e.pageIndex-1,n={source:{droppableId:"null",index:e.pageIndex},destination:{droppableId:"pageList",index:a}};e.movePage(n)}}return l.a.createElement("span",{className:G.a.PageButtons},l.a.createElement(H,{iconClassName:"glyphicon glyphicon-chevron-left",clicked:function(){return t(-1)},tooltipText:"Change page order"}),l.a.createElement(H,{iconClassName:"glyphicon glyphicon-chevron-right",clicked:function(){return t(1)},tooltipText:"Change page order"}))}function W(e){var t=e.page;return l.a.createElement(g.c,{droppableId:"fieldList"},function(a){return l.a.createElement("div",null,l.a.createElement("h3",null,t.name,l.a.createElement(L,{editPage:function(t,a){return e.callbackHandler("PAGE_EDITPAGE",{e:t,id:a})},page:t,registrationPageTypes:e.registrationPageTypes,userTypes:e.userTypes}),l.a.createElement(M,{remove:function(){return e.callbackHandler("PAGE_REMOVEPAGE",t.id)},elementId:t.id,elementName:t.name}),l.a.createElement(U,{pageIndex:e.pageIndex,movePage:function(t){return e.callbackHandler("PAGE_MOVEPAGE",t)}})),l.a.createElement("div",{style:{paddingRight:"15px",height:"50vh",overflowY:"scroll",overflowX:"hidden"},ref:a.innerRef,className:"active-pae-panel"},e.fields.filter(function(e){return!e.isDeleted}).map(function(t,a){var n=e.callbackHandler("FIELD_ISACTIVE",t.id);return l.a.createElement(g.b,{key:t.id,draggableId:"field-"+t.id,index:a},function(a,i){return l.a.createElement("div",Object.assign({ref:a.innerRef},a.draggableProps,a.dragHandleProps),l.a.createElement(B,{field:t,editField:function(a){return e.editField(a,t.id)},openEditField:function(){return e.callbackHandler("FIELD_OPENEDITOR",t.id)},removeField:function(){return e.callbackHandler("FIELD_REMOVEFIELD",t.id)},moveFieldToPage:function(){return e.callbackHandler("PAGE_MOVEFIELDTOPAGE",t.id)},isActive:n,regTypes:e.regTypes,getRuleOptionsForField:e.getRuleOptionsForField,getFieldsWithOptions:e.getFieldsWithOptions,setFieldRules:function(t,a,n){return e.callbackHandler("FIELD_SETFIELDRULES",{fieldId:t,newRules:a,selectedField:n})}}))})}),a.placeholder))})}var q=a(326);function X(e){return l.a.createElement(l.a.Fragment,null,e.field.isForPresentation?null:e.children)}function Y(e){return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"form-group"},l.a.createElement("label",null,"Default Value"),l.a.createElement("input",{type:"text",name:"defaultValue",value:e.field.defaultValue,onChange:function(t){return e.editField(t,e.field.id)},className:"form-control"})),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",null,"Placeholder"),l.a.createElement("input",{type:"text",name:"placeholder",value:e.field.placeholder,onChange:function(t){return e.editField(t,e.field.id)},className:"form-control"})))}function J(e){return l.a.createElement("div",null,l.a.createElement("div",{class:"form-group"},l.a.createElement("label",null,"Date Picker"),l.a.createElement("select",{name:"datePicker",value:e.field.datePicker,onChange:function(t){return e.editField(t,e.field.id)},class:"form-control"},Object.keys(e.field.datePickerOptions).map(function(t){var a=e.field.datePickerOptions[t];return l.a.createElement("option",{value:t},a)}))),l.a.createElement("div",{class:"form-group"},l.a.createElement("label",null,"Date Format"),l.a.createElement("input",{name:"format",value:e.field.format,onChange:function(t){return e.editField(t,e.field.id)},type:"text",class:"form-control"})),l.a.createElement("div",{class:"form-group"},l.a.createElement("label",null,"Default Value"),l.a.createElement("input",{name:"defaultValue",placeholder:"dd/mm/yyyy",value:e.field.defaultValue,onChange:function(t){return e.editField(t,e.field.id)},type:"text",class:"form-control"})))}function K(e){return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{class:"form-group"},l.a.createElement("textarea",{name:"defaultValue",value:e.field.defaultValue,onChange:function(t){return e.editField(t,e.field.id)},class:"form-control",rows:"3"})))}var Q=a(136),z=a.n(Q),Z=a(137),$=a.n(Z);function ee(e){return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"form-group"},l.a.createElement(z.a,{editor:$.a,data:e.field.defaultValue,name:"defaultValue",onChange:function(t,a){var n={target:{value:a.getData(),type:"text",name:"defaultValue"}};e.editField(n,e.field.id)}})))}function te(){var e=(new Date).getTime();return"undefined"!==typeof performance&&"function"===typeof performance.now&&(e+=performance.now()),"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var a=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"===t?a:3&a|8).toString(16)})}a(322);function ae(e){var t=e.option,a=e.removeOption,n=e.editOption,i=e.openModal;return l.a.createElement("div",{className:"form-group"},l.a.createElement("div",{className:"input-group"},l.a.createElement("input",{type:"text",className:"form-control",value:t.value,onChange:function(e){n(t.id,e.target.value)}}),l.a.createElement("div",{className:"input-group-append"},l.a.createElement("span",{onClick:i,className:"input-group-text"},l.a.createElement("span",{className:"fa fa-ellipsis-v","aria-hidden":"true"})),l.a.createElement("span",{onClick:function(){return a(t.id)},className:"input-group-text"},l.a.createElement("span",{className:"fa fa-trash","aria-hidden":"true"})))))}function ne(e){var t=e.addOption,a=Object(n.useState)(""),i=Object(b.a)(a,2),r=i[0],c=i[1];return l.a.createElement("form",{onSubmit:function(e){e.preventDefault(),r&&(t(r),c(""))}},l.a.createElement("input",{type:"text",className:"form-control",placeholder:"Add option",value:r,onChange:function(e){return c(e.target.value)}}))}function le(e){var t=e.field,a=e.editField,n=t.includeDefaultOption?l.a.createElement("input",{type:"text",className:"form-control",name:"defaultValue",placeholder:"Default value",value:t.defaultValue,onChange:function(e){return a(e,t.id)}}):null;return l.a.createElement("div",null,l.a.createElement("div",{className:"checkbox"},l.a.createElement("label",null,l.a.createElement("input",{type:"checkbox",checked:t.includeDefaultOption,name:"includeDefaultOption",onChange:a}),"Include default option")),n)}var ie=function(e){var t=e.field.options;function a(t){var a={target:{name:"options",type:"",value:t}};e.editField(a,e.field.id)}var n=function(e){var n=Object(h.a)(t);n.find(function(t){return t.id===e}).isDeleted=!0,a(n)},i=function(e,n){a(t.map(function(t){return t.id!==e?t:Object(c.a)({},t,{value:n})}))};return l.a.createElement("div",{className:""},l.a.createElement("h3",null,"Options"),l.a.createElement("div",{className:"option-list"},l.a.createElement(g.c,{droppableId:"optionList"},function(a){return l.a.createElement("div",{ref:a.innerRef},t.filter(function(e){return!e.isDeleted}).map(function(t,a){return l.a.createElement(g.b,{key:t.id,draggableId:"option-"+t.id,index:a},function(a){return l.a.createElement("div",Object.assign({ref:a.innerRef},a.draggableProps,a.dragHandleProps),l.a.createElement(ae,{key:t.id,option:t,editOption:i,removeOption:n,openModal:function(){return e.openModal(t.id)}}))})}))}),l.a.createElement(ne,{addOption:function(e){a([].concat(Object(h.a)(t),[{id:te(),value:e,isDeleted:!1}]))}}),l.a.createElement(le,{field:e.field,editField:function(t){return e.editField(t,e.field.id)}})),l.a.createElement("hr",null))},re=a(138),ce=a.n(re);function oe(e){var t=Object(n.useState)(!1),a=Object(b.a)(t,2),i=a[0],r=a[1],c=Object(n.useState)(!0),o=Object(b.a)(c,2),d=o[0],s=o[1],u=Object(n.useState)(!1),m=Object(b.a)(u,2),f=m[0],p=m[1],g=Object(n.useRef)(),E=Object(n.useRef)(),v=e.field,h=null;Object(n.useEffect)(function(){v.name.length<41?g.current.focus():E.current.focus()},[v.name]);var y=function(t,a){e.callbackHandler("FIELD_EDITFIELDHANDLER",{e:t,id:a})};return v&&(h=l.a.createElement("div",{className:"".concat(ce.a.FieldEditor," card bg-light")},l.a.createElement("div",{className:"card-body"},l.a.createElement("div",{className:"pull-right"},l.a.createElement("button",{className:"close"},l.a.createElement("i",{onClick:function(){return e.closeEditor()},className:"glyphicon glyphicon-remove"}))),l.a.createElement("h4",null,"Edit Field - ",v.name),l.a.createElement("hr",null),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",null,"Name"),v.name.length<41?l.a.createElement("input",{ref:g,type:"text",name:"name",value:v.name,onChange:function(e){return y(e,v.id)},className:"form-control"}):l.a.createElement("textarea",{ref:E,name:"name",rows:3,value:v.name,onChange:function(e){return y(e,v.id)},className:"form-control"})),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",null,"Data Tag"),l.a.createElement("div",{className:"input-group"},l.a.createElement("input",{readOnly:d,name:"dataTag",value:v.dataTag,onChange:function(e){return y(e,v.id)},type:"text",className:"form-control"}),l.a.createElement("span",{onClick:function(){s(!d)},className:"input-group-addon btn"},l.a.createElement("i",{class:"fa fa-pencil"})))),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",null,"Registration Types"),Object.keys(e.regTypes).map(function(t){var a=v.registrationTypes.find(function(e){return e.registrationTypeId==t});return l.a.createElement("div",{className:"checkbox",key:t},l.a.createElement("label",null,l.a.createElement("input",{type:"checkbox",checked:void 0!==a,onChange:function(a){return e.callbackHandler("FIELD_EDITCHECKBOX",{e:a,id:v.id,value:t})}}),e.regTypes[t].name))})),l.a.createElement("hr",null),l.a.createElement(X,{field:v},l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"checkbox"},l.a.createElement("label",null,l.a.createElement("input",{type:"checkbox",name:"isMandatory",checked:v.isMandatory,onChange:function(e){return y(e,v.id)}}),"Is Mandatory")),l.a.createElement("div",{className:"checkbox"},l.a.createElement("label",null,l.a.createElement("input",{type:"checkbox",name:"isHalfWidth",checked:v.isHalfWidth,onChange:function(e){return y(e,v.id)}}),"Is Half Width")))),l.a.createElement("div",{className:"checkbox"},l.a.createElement("label",null,l.a.createElement("input",{type:"checkbox",name:"isInternalOnly",checked:v.isInternalOnly,onChange:function(e){return y(e,v.id)}}),"Is Internal Only")),l.a.createElement("div",{style:{cursor:"pointer"},onClick:function(){return p(!f)}},"> Control per reg type"),f?l.a.createElement("div",null,v.registrationTypes.map(function(t){return l.a.createElement("div",{className:"checkbox",key:t},l.a.createElement("label",null,l.a.createElement("input",{type:"checkbox",name:"internalOnly",checked:!!t.isInternalOnly,onChange:function(a){return e.callbackHandler("FIELD_EDITCHECKBOX",{e:a,id:v.id,value:t.registrationTypeId})}}),e.regTypes[t.registrationTypeId].name))})):null,function(){var t=function(t){switch(t){case 1:return{Component:Y};case 5:return{Component:J};case 8:return{Component:ee};case 13:return{Component:K};case 16:case 38:return{Component:ie,props:{openModal:function(t){return e.callbackHandler("FIELD_EDITOPTION",t)}}};default:return null}}(v.fieldTypeId);return t?l.a.createElement(t.Component,Object.assign({},t.props,{editField:y,validate:e.validateField,field:v})):null}(),l.a.createElement("span",{onClick:function(){return r(!i)}},"More options"),l.a.createElement(q.a,{in:i},l.a.createElement("div",null,l.a.createElement("div",{className:"form-group"},l.a.createElement("label",null,"Custom CSS class"),l.a.createElement("input",{type:"text",name:"class",value:v.class,onChange:function(e){return y(e,v.id)},className:"form-control"})),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",null,"Subtext"),l.a.createElement("textarea",{rows:"3",name:"subText",value:v.subText?v.subText:null,onChange:function(e){return y(e,v.id)},className:"form-control"})),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",null,"Reporting Header"),l.a.createElement("input",{type:"text",name:"reportingHeader",value:v.reportingHeader,onChange:function(e){return y(e,v.id)},className:"form-control"})),l.a.createElement(X,{field:v},l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"checkbox"},l.a.createElement("label",null,l.a.createElement("input",{type:"checkbox",name:"isReadOnly",checked:v.isReadOnly,onChange:function(e){return y(e,v.id)}}),"Is Read Only")),l.a.createElement("div",{className:"checkbox"},l.a.createElement("label",null,l.a.createElement("input",{type:"checkbox",name:"canModify",checked:v.canModify,onChange:function(e){return y(e,v.id)}}),"Can Modify"))))))))),h}var de=a(139),se=a.n(de);function ue(e){return l.a.createElement("div",{className:se.a.Backdrop,onClick:e.cancel})}var me=a(140),fe=a.n(me);function pe(e){return l.a.createElement("div",{className:fe.a.ModalHeader},e.children,l.a.createElement("span",{style:{float:"right"},onClick:e.cancel},"x"))}var ge=a(141),Ee=a.n(ge),ve=a(81),he=a.n(ve);function be(e){var t=[he.a.Button,he.a[e.btnType]].join(" ");return l.a.createElement("button",{className:t,onClick:e.clicked},e.children)}function ye(e){return l.a.createElement("div",{className:Ee.a.ModalFooter},l.a.createElement(be,{btnType:"Primary",clicked:e.success},"Add Field")," "," ",l.a.createElement(be,{btnType:"Danger",clicked:e.cancel},"Cancel"))}var Fe=a(142),xe=a.n(Fe);function Ne(e){return l.a.createElement("div",{className:xe.a.ModalBody},e.children,l.a.createElement(ye,{cancel:e.cancel,success:e.success}))}var Oe=a(143),Ie=a.n(Oe);function Te(e){return l.a.createElement("div",null,l.a.createElement(ue,{cancel:e.cancel}),l.a.createElement("div",{className:Ie.a.Modal},l.a.createElement(pe,{cancel:e.cancel},e.modalTitle),l.a.createElement(Ne,{cancel:e.cancel,success:e.success},e.children)))}function ke(e){var t=Object(n.useState)(!1),a=Object(b.a)(t,2),i=a[0],r=a[1],c=Object(n.useState)(""),o=Object(b.a)(c,2),d=o[0],s=o[1],u=Object(n.useState)(!0),m=Object(b.a)(u,2),f=m[0],p=m[1],g=Object(n.useState)([]),E=Object(b.a)(g,2),v=E[0],y=E[1],F=Object(n.useState)(!1),x=Object(b.a)(F,2),N=x[0],O=x[1];var I=l.a.createElement("div",null,l.a.createElement("div",{className:"form-group"},l.a.createElement("textarea",{name:"text",rows:"10",className:"form-control",autoFocus:!0,onChange:function(e){return s(e.target.value)},onKeyDown:function(e){if(9!==e.keyCode)return!1;e.preventDefault();var t=e.target.value,a=e.target.selectionStart,n=e.target.selectionEnd;return e.target.value=t.substring(0,a)+"\t"+t.substring(n),e.target.selectionStart=e.target.selectionEnd=a+1,!1}}),l.a.createElement("span",{className:"help-block"},"Add fields on new lines. Tab then type the quick field type name")),l.a.createElement("div",{className:"checkbox"},l.a.createElement("label",null,l.a.createElement("input",{type:"checkbox",name:"capitalise",checked:f,onChange:function(e){return p(e.target.checked)}}),"Capitalise each word in a field name")),l.a.createElement("div",{className:"form-group"},l.a.createElement("button",{onClick:function(){if(d)for(var e=d.split("\n"),t=0;t<e.length;t++){var a=e[t];if(a){var n=a.split("\t",2),l=n[0].replace(/\b\w/g,function(e){return e.toUpperCase()}),i=1;if(n.length>1)switch(n[1]){case"e":case"email":i=9;break;case"p":case"phone":i=10;break;case"d":case"date":i=5}v.push({name:l,fieldTypeId:i}),O(!0)}}},className:"btn btn-primary"},"Next"))),T=function(e,t){v[e][t.target.name]=t.target.value,y(Object(h.a)(v))},k=v.map(function(e,t){return l.a.createElement("div",{className:"panel panel-default",key:t},l.a.createElement("div",{className:"form-inline panel-body"},l.a.createElement("div",{className:"form-group"},l.a.createElement("label",null,"Name"),l.a.createElement("input",{type:"text",name:"name",value:e.name,onChange:function(e){return T(t,e)},className:"form-control"})),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",null,"Type"),l.a.createElement("select",{name:"fieldTypeId",value:e.fieldTypeId,onChange:function(e){return T(t,e)},className:"form-control"},l.a.createElement("option",{value:1},"Text"),l.a.createElement("option",{value:5},"Date")))))}),P=l.a.createElement("div",null,k,l.a.createElement("div",{className:"form-group"},l.a.createElement("button",{onClick:function(){console.log(v),e.addFields(v.map(function(t){var a=e.getBlankField(t.fieldTypeId);return a.name=t.name,a.fieldTypeId=t.fieldTypeId,a})),r(!1)},className:"btn btn-primary"},"Add Fields"))),C=l.a.createElement(S.a,{show:i,onHide:function(){return r(!1)}},l.a.createElement(S.a.Header,{closeButton:!0},l.a.createElement(S.a.Title,null,"Quick Add Fields")),l.a.createElement(S.a.Body,null,N?P:I));return l.a.createElement(l.a.Fragment,null,C,l.a.createElement("button",{onClick:function(){y([]),s(""),O(!1),r(!0)},className:"btn"},"Quick Add Fields"))}function Se(e){return l.a.createElement("div",null,l.a.createElement("div",{className:"btn btn-default btn-block",onClick:function(){return e.add(e.fieldTypeId)},style:{margin:5}},e.children))}function Pe(e){return l.a.createElement("div",{className:"card bg-light"},l.a.createElement("div",{className:"card-body"},l.a.createElement("h3",null,"Toolbox"),l.a.createElement(Se,{add:function(){return e.addNewField(1)}},l.a.createElement("div",{className:"fieldToolboxItem"},l.a.createElement("div",null,"Text"),l.a.createElement("div",null,l.a.createElement("span",{className:"fa fa-pencil","aria-hidden":"true"})))),l.a.createElement(Se,{add:function(){return e.addNewField(41)}},l.a.createElement("div",{className:"fieldToolboxItem"},l.a.createElement("div",null,"First Name"),l.a.createElement("div",null,l.a.createElement("span",{className:"fa fa-pencil","aria-hidden":"true"})))),l.a.createElement(Se,{add:function(){return e.addNewField(39)}},l.a.createElement("div",{className:"fieldToolboxItem"},l.a.createElement("div",null,"Last Name"),l.a.createElement("div",null,l.a.createElement("span",{className:"fa fa-pencil","aria-hidden":"true"})))),l.a.createElement(Se,{add:function(){return e.addNewField(9)}},l.a.createElement("div",{className:"fieldToolboxItem"},l.a.createElement("div",null,"Email"),l.a.createElement("div",null,l.a.createElement("span",{className:"fa fa-envelope","aria-hidden":"true"})))),l.a.createElement(Se,{add:function(){return e.addNewField(16)}},l.a.createElement("div",{className:"fieldToolboxItem"},l.a.createElement("div",null,"Select List"),l.a.createElement("div",null,l.a.createElement("span",{className:"fa fa-list","aria-hidden":"true"})))),l.a.createElement(Se,{add:function(){return e.addNewField(5)}},l.a.createElement("div",{className:"fieldToolboxItem"},l.a.createElement("div",null,"Date"),l.a.createElement("div",null,l.a.createElement("span",{className:"fa fa-calendar","aria-hidden":"true"})))),l.a.createElement(Se,{add:function(){return e.addNewField(13)}},l.a.createElement("div",{className:"fieldToolboxItem"},l.a.createElement("div",null,"Paragraph"),l.a.createElement("div",null,l.a.createElement("span",{className:"fa fa-paragraph","aria-hidden":"true"})))),l.a.createElement(Se,{add:function(){return e.addNewField(8)}},l.a.createElement("div",{className:"fieldToolboxItem"},l.a.createElement("div",null,"Heading"),l.a.createElement("div",null,l.a.createElement("span",{className:"fa fa-header","aria-hidden":"true"})))),l.a.createElement(Se,{add:function(){return e.addNewField(14)}},l.a.createElement("div",{className:"fieldToolboxItem"},l.a.createElement("div",null,"Separator Line"),l.a.createElement("div",null,l.a.createElement("span",{className:"fa fa-road","aria-hidden":"true"})))),l.a.createElement(Se,{add:function(){return e.addNewField(10)}},l.a.createElement("div",{className:"fieldToolboxItem"},l.a.createElement("div",null,"Phone Number"),l.a.createElement("div",null,l.a.createElement("span",{className:"fa fa-phone","aria-hidden":"true"})))),l.a.createElement(Se,{add:function(){return e.addNewField(40)}},l.a.createElement("div",{className:"fieldToolboxItem"},l.a.createElement("div",null,"User Information"),l.a.createElement("div",null,l.a.createElement("span",{className:"fa fa-pencil","aria-hidden":"true"})))),l.a.createElement(Se,{add:function(){return e.addNewField(42)}},l.a.createElement("div",{className:"fieldToolboxItem"},l.a.createElement("div",null,"Flight Builder"),l.a.createElement("div",null,l.a.createElement("span",{className:"fa fa-plane","aria-hidden":"true"}))))))}a(323);function Ce(e){return l.a.createElement(S.a,{show:!0,onHide:e.cancel},l.a.createElement(S.a.Header,{closeButton:!0},l.a.createElement(S.a.Title,null,"Delete ",l.a.createElement("b",null,e.element.name),"?")),l.a.createElement(S.a.Footer,null,l.a.createElement(_.a,{className:"btn btn-primary",onClick:e.cancel},"No"),l.a.createElement(_.a,{className:"btn btn-danger",onClick:function(){return e.remove(e.element.id)}},"Yes, off with its head!")))}function je(e){var t=Object(n.useState)(null),a=Object(b.a)(t,2),i=a[0],r=a[1];return l.a.createElement(S.a,{show:!0,onHide:e.cancel},l.a.createElement(S.a.Header,{closeButton:!0},l.a.createElement(S.a.Title,null,"Move ",l.a.createElement("b",null,e.element.name),"?")),l.a.createElement(S.a.Body,null,l.a.createElement("p",null,"Move to page: "," ",l.a.createElement("select",{onChange:function(e){return r(e.target.value)}},l.a.createElement("option",null,"-- Select Page --"),e.pages.map(function(e){return l.a.createElement("option",{value:e.id},e.name)})))),l.a.createElement(S.a.Footer,null,l.a.createElement(_.a,{className:"btn btn-primary",onClick:e.cancel},"No"),l.a.createElement(_.a,{className:"btn btn-danger",onClick:function(){return e.move(e.element.id,i)}},"Yes, move the page!")))}function De(e){var t=Object(n.useState)(""),a=Object(b.a)(t,2),i=a[0],r=a[1],c=Object(n.useState)(""),o=Object(b.a)(c,2),d=o[0],s=o[1],u=Object(n.useState)(null),m=Object(b.a)(u,2),f=m[0],p=m[1];return Object(n.useEffect)(function(){r(e.element.additionalInfo),s(e.element.internalInfo),p(e.element.capacity)},[e.element.additionalInfo,e.element.internalInfo,e.element.capacity]),l.a.createElement(S.a,{show:!0,onHide:e.cancel},l.a.createElement(S.a.Header,{closeButton:!0},l.a.createElement(S.a.Title,null,"Update ",l.a.createElement("b",null,e.element.value),"?")),l.a.createElement(S.a.Body,null,l.a.createElement("div",{className:"form-group"},l.a.createElement("label",null,"Additional Info"),l.a.createElement("input",{type:"text",name:"additionalInfo",value:i,onChange:function(e){return r(e.target.value)},className:"form-control"})),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",null,"Internal Info"),l.a.createElement("input",{type:"text",name:"internalInfo",value:d,onChange:function(e){return s(e.target.value)},className:"form-control"})),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",null,"Capacity"),l.a.createElement("input",{type:"number",name:"capacity",value:f,onChange:function(e){return p(e.target.value)},className:"form-control"}))),l.a.createElement(S.a.Footer,null,l.a.createElement(_.a,{className:"btn btn-danger",onClick:e.cancel},"Cancel"),l.a.createElement(_.a,{className:"btn btn-success",onClick:function(){var t={additionalInfo:i,internalInfo:d,capacity:f};e.save(t,e.element)}},"Save Changes")))}function _e(e){var t=e.handleFileChosen,a=e.exportFile;return l.a.createElement("div",{className:"rightAlign"},l.a.createElement("div",{className:"import-upload"},l.a.createElement("label",{htmlFor:"file-input"},l.a.createElement("span",{className:"glyphicon glyphicon-upload","aria-hidden":"true",title:"Import"})),l.a.createElement("input",{type:"file",id:"file-input",accept:".json",onChange:function(e){return t(e)}})),"\xa0",l.a.createElement("div",{className:"import-download"},l.a.createElement("label",null,l.a.createElement("span",{className:"glyphicon glyphicon-download","aria-hidden":"true",onClick:a,title:"Export"}))))}var we=a(38),Ae=a.n(we);function He(e){var t=e.regTypes,a=e.filtered,n=e.roleTypes,i=e.filteredRoleTypes,r=e.callbackHandler,c=Object.keys(t).map(function(e){return{id:e,name:t[e].name}});return l.a.createElement("div",null,l.a.createElement("h2",null,"Filter Fields"),l.a.createElement("br",null),l.a.createElement("fieldset",null,l.a.createElement("legend",null,"Registration Types"),c.map(function(e){var t=a.some(function(t){return t.name===e.name});return l.a.createElement("span",{key:e.id,className:"".concat(Ae.a.Filter,"  ").concat(t?Ae.a.FilterActive:null),onClick:function(){return function(e){var t=[];t=a.some(function(t){return t.name===e.name})?a.filter(function(t){if(t.name!==e.name)return t}):[].concat(Object(h.a)(a),[e]),r("regTypes",t)}(e)}},e.name," ")})),l.a.createElement("fieldset",null,l.a.createElement("legend",null,"View Roles"),n.map(function(e){var t=i.some(function(t){return t===e});return l.a.createElement("span",{key:e,className:"".concat(Ae.a.Filter,"  ").concat(t?Ae.a.FilterActive:null),onClick:function(){return function(e){var t=[];t=i.includes(e)?i.filter(function(t){return t!==e}):[].concat(Object(h.a)(i),[e]),r("roleTypes",t)}(e)}},e," ")})),l.a.createElement("br",null))}var Re=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).save=function(){var e=Object(p.cloneDeep)(a.state.fields),t=e.filter(function(e){return!e.isDeleted}).filter(function(e){return""===e.name});if(t.length>0)return t.map(function(t){var a=e.indexOf(t);e[a]=Object(c.a)({},t,{isInvalid:!0})}),void a.setState({fields:e});a.setState({isSaving:!0},function(){return a.saveToServer()})},a.saveToServer=function(){v.a.post("/api/registrationadmin/post",{fields:a.state.fields,pages:a.state.pages}).then(function(e){alert("Saved successfully"),a.setState({isDirty:!1,isSaving:!1})})},a.handleFileRead=function(e){a.setState({loaded:!1});var t=JSON.parse(a.fileReader.result);v.a.post("/api/registrationadmin/ParseImport",t).then(function(e){a.setState({fields:a.state.fields.concat(e.data.fields),pages:a.state.pages.concat(e.data.pages),loaded:!0}),console.log("imported")}).catch(function(e){a.setState({loaded:!0}),console.log(e)})},a.handleFileChosen=function(e){a.fileReader.onloadend=a.handleFileRead,a.fileReader.readAsText(e.target.files[0]),e.target.value=""},a.export=function(){v.a.get("/api/registrationadmin/export")},a.state={pages:[],fields:[],blankFields:{},registrationTypes:{},activePage:null,editField:null,showModal:!1,newField:"",selectedFields:[],loaded:!1,removeField:null,moveFieldToPage:null,editOption:null,userTypes:[],registrationPageTypes:[],isSaving:!1,isDirty:!1,fieldFilters:{regTypes:[],roleTypes:[]}},console.log("constructor after: "+a.state.loaded),a.fileReader=new FileReader,a.setAppState=a.setAppState.bind(Object(f.a)(Object(f.a)(a))),a.pageService=new O(function(){return a.state},a.setAppState),a.fieldService=new I(function(){return a.state},a.setAppState),a}return Object(m.a)(t,e),Object(d.a)(t,[{key:"setAppState",value:function(e,t){this.setState(e,function(){t&&t()})}},{key:"componentDidMount",value:function(){var e=this;v.a.get("/api/registrationadmin/get").then(function(t){if(t.data.pages.length<1){var a={id:e.pageService.generateUUID(),name:"default page",fields:[],isDeleted:!1,description:"",registrationPageTypeId:null,isInternalOnly:0,readerUserTypeId:null,writerUserTypeId:null};t.data.pages.push(a)}t.data.activePage=t.data.pages[0].id,e.setState(Object(c.a)({},t.data,{loaded:!0}))}),window.addEventListener("beforeunload",function(t){e.state.isDirty&&(t.preventDefault(),t.returnValue="")})}},{key:"componentDidUpdate",value:function(e,t){var a,n=this;if(0!==t.pages.length&&0!==t.fields.length&&(t.pages===this.state.pages&&t.fields===this.state.fields||this.setState({isDirty:!0}),this.state.editField&&(a=this.state.fields.find(function(e){return e.id===n.state.editField})),t.editField!==this.state.editField&&void 0!==a&&a.name.length>0)){var l=this.state.fields,i=Object(c.a)({},a,{nameAttrWillNotUpdateDataTag:!0}),r=l.indexOf(a);l[r]=i,this.setState({fields:l})}}},{key:"get",value:function(e,t){return e.find(function(e){return e.id===t})}},{key:"render",value:function(){var e=this;console.log(this.pageService.removePage);var t=null;this.state.showModal&&(t=l.a.createElement(Te,{modalTitle:"Add Field",cancel:function(){return e.setState({showModal:!1})}},l.a.createElement("label",null,"Name: "),l.a.createElement("input",{type:"text",value:this.state.newField,onChange:function(t){return e.setState({newField:t.target.value})}})));var a,n,i=null;if(this.state.editOption&&(i=l.a.createElement(De,{save:this.fieldService.updateOption,element:this.state.editOption,cancel:function(){return e.setState({editOption:null})}})),this.state.removeField&&(a=l.a.createElement(Ce,{remove:this.fieldService.removeField,element:this.state.removeField,cancel:function(){return e.setState({removeField:null})}})),this.state.moveFieldToPage){var r=this.state.activePage,o=this.state.pages.filter(function(e){return e.id!=r}).map(function(e){return{id:e.id,name:e.name}});n=l.a.createElement(je,{pages:o,move:this.fieldService.moveFieldToPage,element:this.state.moveFieldToPage,cancel:function(){return e.setState({moveFieldToPage:null})}})}if(!this.state.loaded)return l.a.createElement("div",null,"LOADING!");var d,s=this.get(this.state.pages,this.state.activePage),u=[];if(void 0!==s&&s.fields.forEach(function(t){var a=e.get(e.state.fields,t);u.push(a)}),this.state.fieldFilters.regTypes){var m=u.map(function(e){return Object(c.a)({},e,{isVisible:!1})});m.map(function(t){t.registrationTypes.map(function(a){e.state.fieldFilters.regTypes.map(function(e){if(e.id==a.registrationTypeId){var n=m.indexOf(t);m[n]=Object(c.a)({},t,{isVisible:!0})}})})}),u=m}if(this.state.fieldFilters.roleTypes.length<2){var f=u;this.state.fieldFilters.roleTypes.includes("Is Internal Only")?f.map(function(e){if(e.isVisible&&!e.isInternalOnly){var t=f.indexOf(e);f[t]=Object(c.a)({},e,{isVisible:!1})}}):this.state.fieldFilters.roleTypes.includes("Not Internal")?f.map(function(e){if(e.isVisible&&e.isInternalOnly){var t=f.indexOf(e);f[t]=Object(c.a)({},e,{isVisible:!1})}}):u=[],u=f}this.state.editField&&(d=l.a.createElement(oe,{field:this.get(this.state.fields,this.state.editField),regTypes:this.state.registrationTypes,validateField:this.validateField,closeEditor:function(){return e.setState({editField:null})},callbackHandler:function(e,t){return E(e,t)}}));var p=null;this.state.isSaving&&(p=l.a.createElement("div",{style:{width:"100vw",height:"100vh",backgroundColor:"white",position:"fixed",top:0,left:0,padding:"50% 0",textAlign:"center"}},"Saving! This could take a few seconds"));var E=function(t,a){switch(t){case"PAGE_ADDPAGE":e.pageService.addPage(a);break;case"PAGE_REMOVEPAGE":e.pageService.removePage(a);break;case"PAGE_EDITPAGE":e.pageService.editPageHandler(a.e,a.id);break;case"PAGE_SETPAGE":e.pageService.setPage(a);break;case"PAGE_MOVEPAGE":e.pageService.onDragEnd(a);break;case"PAGE_MOVEFIELDTOPAGE":e.pageService.movefieldToPage(a);break;case"FIELD_EDITFIELDHANDLER":e.fieldService.editFieldHandler(a.e,a.id);break;case"FIELD_REMOVEFIELD":e.fieldService.preRemoveField(a);break;case"FIELD_OPENEDITOR":e.fieldService.openEditField(a);break;case"FIELD_ISACTIVE":case"FIELD_SETFIELDRULES":e.fieldService.isActiveField(a);break;case"FIELD_EDITOPTION":e.fieldService.editOption(a);break;case"FIELD_EDITCHECKBOX":e.fieldService.editCheckboxFieldHandler(a.e,a.id,a.value)}};return l.a.createElement("div",{className:"App"},l.a.createElement("div",{className:"inline"},l.a.createElement("h1",null,"Registration Editor"),l.a.createElement(_e,{handleFileChosen:this.handleFileChosen,exportFile:this.export})),l.a.createElement(g.a,{onDragEnd:this.fieldService.onDragEnd},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-2"},l.a.createElement(Pe,{addNewField:this.fieldService.addNewField})),l.a.createElement("div",{className:"col-md-6"},l.a.createElement(He,{regTypes:this.state.registrationTypes,filtered:this.state.fieldFilters.regTypes,roleTypes:["Is Internal Only","Not Internal"],filteredRoleTypes:this.state.fieldFilters.roleTypes,callbackHandler:function(t,a){var n=Object(c.a)({},e.state.fieldFilters);n[t]=a,e.setState({fieldFilters:n})}}),l.a.createElement(C,{pages:this.state.pages,activePage:this.state.activePage,pageCallbackHandler:E}),this.state.activePage?l.a.createElement("div",{className:"PageLayout"},l.a.createElement(be,{btnType:"Success",clicked:this.save},"Save")," ",l.a.createElement(ke,{fieldTypes:this.state.fieldTypes,addFields:this.fieldService.addFields,getBlankField:this.fieldService.getBlankField}),l.a.createElement("hr",null),l.a.createElement(W,{page:s,pageIndex:this.state.pages.indexOf(s),fields:u,callbackHandler:function(e,t){return E(e,t)},getRuleOptionsForField:this.fieldService.getRuleOptionsForField,getFieldsWithOptions:this.fieldService.getFieldsWithOptions,regTypes:this.state.registrationTypes,registrationPageTypes:this.state.registrationPageTypes,userTypes:this.state.userTypes}),l.a.createElement("hr",null),l.a.createElement(be,{btnType:"Success",clicked:this.save},"Save")," ",l.a.createElement(ke,{fieldTypes:this.state.fieldTypes,addFields:this.fieldService.addFields,getBlankField:this.fieldService.getBlankField}),l.a.createElement("br",null),l.a.createElement("br",null)):null),l.a.createElement("div",{className:"col-md-4"},d),t,a,n,i,p)))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(l.a.createElement(Re,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},37:function(e,t,a){e.exports={Pages:"Pages_Pages__2yp6a",Active:"Pages_Active__GNX2V"}},38:function(e,t,a){e.exports={Filter:"FilterFields_Filter__17Fq6",FilterActive:"FilterFields_FilterActive__1LwqZ"}},59:function(e,t,a){e.exports={Field:"Field_Field__3b63C",ActiveField:"Field_ActiveField__17q7l"}},80:function(e,t,a){e.exports={Tooltip:"Icon_Tooltip__WO_tN",TooltipText:"Icon_TooltipText__2QkrS"}},81:function(e,t,a){e.exports={Button:"Button_Button__2yeog",Default:"Button_Default__1h9qM",Primary:"Button_Primary__1q1iB",Success:"Button_Success__39yMY",Danger:"Button_Danger__2UIVc"}}},[[145,1,2]]]);
//# sourceMappingURL=main.d0f2f91e.chunk.js.map