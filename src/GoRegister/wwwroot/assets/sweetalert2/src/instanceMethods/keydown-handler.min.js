/**
 * Minified by jsDelivr using Terser v3.14.1.
 * Original file: /npm/sweetalert2@9.6.0/src/instanceMethods/keydown-handler.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
import*as dom from"../utils/dom/index.js";import{DismissReason}from"../utils/DismissReason.js";import{callIfFunction}from"../utils/utils.js";import{clickConfirm}from"../staticMethods/dom.js";import privateProps from"../privateProps.js";export const addKeydownHandler=(e,t,o,n)=>{t.keydownTarget&&t.keydownHandlerAdded&&(t.keydownTarget.removeEventListener("keydown",t.keydownHandler,{capture:t.keydownListenerCapture}),t.keydownHandlerAdded=!1),o.toast||(t.keydownHandler=(t=>keydownHandler(e,t,n)),t.keydownTarget=o.keydownListenerCapture?window:dom.getPopup(),t.keydownListenerCapture=o.keydownListenerCapture,t.keydownTarget.addEventListener("keydown",t.keydownHandler,{capture:t.keydownListenerCapture}),t.keydownHandlerAdded=!0)};export const setFocus=(e,t,o)=>{const n=dom.getFocusableElements();for(let e=0;e<n.length;e++)return(t+=o)===n.length?t=0:-1===t&&(t=n.length-1),n[t].focus();dom.getPopup().focus()};const arrowKeys=["ArrowLeft","ArrowRight","ArrowUp","ArrowDown","Left","Right","Up","Down"],escKeys=["Escape","Esc"],keydownHandler=(e,t,o)=>{const n=privateProps.innerParams.get(e);n.stopKeydownPropagation&&t.stopPropagation(),"Enter"===t.key?handleEnter(e,t,n):"Tab"===t.key?handleTab(t,n):arrowKeys.includes(t.key)?handleArrows():escKeys.includes(t.key)&&handleEsc(t,n,o)},handleEnter=(e,t,o)=>{if(!t.isComposing&&t.target&&e.getInput()&&t.target.outerHTML===e.getInput().outerHTML){if(["textarea","file"].includes(o.input))return;clickConfirm(),t.preventDefault()}},handleTab=(e,t)=>{const o=e.target,n=dom.getFocusableElements();let r=-1;for(let e=0;e<n.length;e++)if(o===n[e]){r=e;break}e.shiftKey?setFocus(0,r,-1):setFocus(0,r,1),e.stopPropagation(),e.preventDefault()},handleArrows=()=>{const e=dom.getConfirmButton(),t=dom.getCancelButton();document.activeElement===e&&dom.isVisible(t)?t.focus():document.activeElement===t&&dom.isVisible(e)&&e.focus()},handleEsc=(e,t,o)=>{callIfFunction(t.allowEscapeKey)&&(e.preventDefault(),o(DismissReason.esc))};
//# sourceMappingURL=/sm/63d39dc1a6003b5209c5f3127af364f7b1196c4e30bdbde9f437c8a17d49416d.map