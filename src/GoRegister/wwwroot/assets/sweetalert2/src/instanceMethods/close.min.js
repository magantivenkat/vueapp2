/**
 * Minified by jsDelivr using Terser v3.14.1.
 * Original file: /npm/sweetalert2@9.6.0/src/instanceMethods/close.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
import{undoScrollbar}from"../utils/scrollbarFix.js";import{undoIOSfix}from"../utils/iosFix.js";import{undoIEfix}from"../utils/ieFix.js";import{unsetAriaHidden}from"../utils/aria.js";import*as dom from"../utils/dom/index.js";import{swalClasses}from"../utils/classes.js";import globalState,{restoreActiveElement}from"../globalState.js";import privateProps from"../privateProps.js";import privateMethods from"../privateMethods.js";function removePopupAndResetState(e,o,s,t){s?triggerOnAfterCloseAndDispose(e,t):(restoreActiveElement().then(()=>triggerOnAfterCloseAndDispose(e,t)),globalState.keydownTarget.removeEventListener("keydown",globalState.keydownHandler,{capture:globalState.keydownListenerCapture}),globalState.keydownHandlerAdded=!1),o.parentNode&&o.parentNode.removeChild(o),dom.isModal()&&(undoScrollbar(),undoIOSfix(),undoIEfix(),unsetAriaHidden()),removeBodyClasses()}function removeBodyClasses(){dom.removeClass([document.documentElement,document.body],[swalClasses.shown,swalClasses["height-auto"],swalClasses["no-backdrop"],swalClasses["toast-shown"],swalClasses["toast-column"]])}function disposeSwal(e){delete e.params,delete globalState.keydownHandler,delete globalState.keydownTarget,unsetWeakMaps(privateProps),unsetWeakMaps(privateMethods)}export function close(e){const o=dom.getPopup();if(!o)return;const s=privateProps.innerParams.get(this);if(!s||dom.hasClass(o,s.hideClass.popup))return;const t=privateMethods.swalPromiseResolve.get(this);dom.removeClass(o,s.showClass.popup),dom.addClass(o,s.hideClass.popup);const a=dom.getContainer();dom.removeClass(a,s.showClass.backdrop),dom.addClass(a,s.hideClass.backdrop),handlePopupAnimation(this,o,s),t(e||{})}const handlePopupAnimation=(e,o,s)=>{const t=dom.getContainer(),a=dom.animationEndEvent&&dom.hasCssAnimation(o),{onClose:n,onAfterClose:l}=s;null!==n&&"function"==typeof n&&n(o),a?animatePopup(e,o,t,l):removePopupAndResetState(e,t,dom.isToast(),l)},animatePopup=(e,o,s,t)=>{globalState.swalCloseEventFinishedCallback=removePopupAndResetState.bind(null,e,s,dom.isToast(),t),o.addEventListener(dom.animationEndEvent,function(e){e.target===o&&(globalState.swalCloseEventFinishedCallback(),delete globalState.swalCloseEventFinishedCallback)})},unsetWeakMaps=e=>{for(const o in e)e[o]=new WeakMap},triggerOnAfterCloseAndDispose=(e,o)=>{setTimeout(()=>{null!==o&&"function"==typeof o&&o(),dom.getPopup()||disposeSwal(e)})};export{close as closePopup,close as closeModal,close as closeToast};
//# sourceMappingURL=/sm/15465b1ec878a4b5fe2f66db15345294377a6513e6c8ecf4e0b145c1f0a0e2f5.map